this.InfoTrack=this.InfoTrack||{};this.InfoTrack.Shared=this.InfoTrack.Shared||{};this.InfoTrack.Shared.Collections=this.InfoTrack.Shared.Collections||{};this.InfoTrack=this.InfoTrack||{};this.InfoTrack.Shared=this.InfoTrack.Shared||{};this.InfoTrack.Shared.Models=this.InfoTrack.Shared.Models||{};this.InfoTrack=this.InfoTrack||{};this.InfoTrack.Shared=this.InfoTrack.Shared||{};this.InfoTrack.Shared.Views=this.InfoTrack.Shared.Views||{};this.InfoTrack=this.InfoTrack||{};this.InfoTrack.Shared=this.InfoTrack.Shared||{};this.InfoTrack.Shared.Utils=this.InfoTrack.Shared.Utils||{};this.InfoTrack=this.InfoTrack||{};this.InfoTrack.SEOTracker=this.InfoTrack.SEOTracker||{};this.InfoTrack.SEOTracker.Collections=this.InfoTrack.SEOTracker.Collections||{};this.InfoTrack=this.InfoTrack||{};this.InfoTrack.SEOTracker=this.InfoTrack.SEOTracker||{};this.InfoTrack.SEOTracker.Models=this.InfoTrack.SEOTracker.Models||{};this.InfoTrack=this.InfoTrack||{};this.InfoTrack.SEOTracker=this.InfoTrack.SEOTracker||{};this.InfoTrack.SEOTracker.Views=this.InfoTrack.SEOTracker.Views||{};this.InfoTrack=this.InfoTrack||{};this.InfoTrack.SEOTracker=this.InfoTrack.SEOTracker||{};this.InfoTrack.SEOTracker.Utils=this.InfoTrack.SEOTracker.Utils||{},function(n){n.Router=Backbone.Router.extend({routes:{"seotracker/latest":"latestResult","seotracker/all-time":"allTimeResults"},initialize:function(){this.renderMenu()},latestResult:function(){var t=new n.Collections.SearchPositionCollection,i=new n.Views.PositionListView({el:"#seotracker-app .body-container",collection:t});i.render();t.fetch()},allTimeResults:function(){var t=new n.Collections.DataPointCollection,i=new n.Views.AllTimeView({el:"#seotracker-app .body-container",collection:t});i.render();t.fetch()},renderMenu:function(){var t=new n.Views.MenuView({el:"#seotracker-app .menu-container"});t.render()}})}(InfoTrack.SEOTracker),function(n){n.Models.DataPoint=Backbone.Model.extend({idAttribute:"timestamp",defaults:{position:null,timestamp:null}})}(InfoTrack.SEOTracker),function(n){"use strict";n.Models.SearchPosition=Backbone.Model.extend({idAttribute:"index",defaults:{url:null,index:null}})}(InfoTrack.SEOTracker),function(n){n.Collections.DataPointCollection=Backbone.Collection.extend({url:"/api/searchresults/datapoints",model:n.Models.DataPoint,initialize:function(){this.listenTo(this,"sync",this.resetLoading);this.listenTo(this,"request",this.setLoading)},isLoading:function(){return this._loading},setLoading:function(){this._loading=!0},resetLoading:function(){this._loading=!1}})}(InfoTrack.SEOTracker),function(n){"use strict";n.Collections.SearchPositionCollection=Backbone.Collection.extend({url:"/api/searchresults/latest/positions",model:n.Models.SearchPosition,initialize:function(){this.listenTo(this,"sync",this.resetLoading);this.listenTo(this,"request",this.setLoading)},isLoading:function(){return this._loading},setLoading:function(){this._loading=!0},resetLoading:function(){this._loading=!1}})}(InfoTrack.SEOTracker);this.InfoTrack=this.InfoTrack||{};this.InfoTrack.SEOTracker=this.InfoTrack.SEOTracker||{};this.InfoTrack.SEOTracker.Templates=this.InfoTrack.SEOTracker.Templates||{};this.InfoTrack.SEOTracker.Templates.Menu=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(){return'<div class="btn-group" role="group">\n    <a href="/seotracker/latest" id="latest" type="button" class="btn btn-default">Latest Result<\/a>\n    <a href="/seotracker/all-time" id="all-time" type="button" class="btn btn-default">All Time Results<\/a>\n<\/div>'},useData:!0});this.InfoTrack.SEOTracker.Templates.PositionListItem=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(n,t,i,r,u){var f,e=t!=null?t:{},o=i.helperMissing,s="function",h=n.escapeExpression;return'<span class="index-container">'+h((f=(f=i.index||(t!=null?t.index:t))!=null?f:o,typeof f===s?f.call(e,{name:"index",hash:{},data:u}):f))+'<\/span><span class="text-container">'+h((f=(f=i.url||(t!=null?t.url:t))!=null?f:o,typeof f===s?f.call(e,{name:"url",hash:{},data:u}):f))+"<\/span>"},useData:!0}),function(n){"use strict";n.Views.LoaderView=Backbone.View.extend({name:"LoaderView",className:"loader-view",template:function(){return"I'm working hard. Please be patient."},render:function(){return this.$el.html(this.template()),this}})}(InfoTrack.Shared),function(n){n.Views.AllTimeView=Backbone.View.extend({initialize:function(){this.listenTo(this.collection,"sync request",this.render)},renderChart:function(){var n=this.collection.map(function(n){var t=Date.parse(n.get("timestamp")),i=n.get("position");return[t,i]});Highcharts.chart(this.el,{chart:{type:"spline"},credits:{enabled:!1},legend:{enabled:!1},title:{text:null},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%b"}},yAxis:{title:{text:null},min:0},tooltip:{enabled:!1},plotOptions:{spline:{marker:{enabled:!0}}},series:[{name:!1,data:n}]})},render:function(){return this.$el.empty(),this.collection.isLoading()?this.$el.html((new InfoTrack.Shared.Views.LoaderView).render().el):this.collection.isEmpty()?this.$el.html("Nothing is here yet!"):this.renderChart(),this}})}(InfoTrack.SEOTracker),function(n){n.Views.MenuView=Backbone.View.extend({template:n.Templates.Menu,events:{"click #latest":"latest","click #all-time":"allTime"},latest:function(n){n.preventDefault();InfoTrack.Router.navigate("seotracker/latest",{trigger:!0})},allTime:function(n){n.preventDefault();InfoTrack.Router.navigate("seotracker/all-time",{trigger:!0})},render:function(){return this.$el.html(this.template()),this}})}(InfoTrack.SEOTracker),function(n){"use strict";n.Views.PositionListItemView=Backbone.View.extend({name:"PositionListItemView",className:"position-list-item-view",template:n.Templates.PositionListItem,render:function(){var n=this.template(this.model.toJSON());return this.$el.html(n),this}})}(InfoTrack.SEOTracker),function(n){n.Views.PositionListView=Backbone.View.extend({name:"PositionListView",className:"position-list-view",childView:n.Views.PositionListItemView,initialize:function(){this.listenTo(this.collection,"sync request",this.render)},addOne:function(n){var t=new this.childView({model:n});this.$el.append(t.render().el)},render:function(){return this.$el.empty(),this.collection.isLoading()?this.$el.html((new InfoTrack.Shared.Views.LoaderView).render().el):this.collection.isEmpty()?this.$el.html("Nothing is here yet!"):this.collection.each(this.addOne,this),this}})}(InfoTrack.SEOTracker);